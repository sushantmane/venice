<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>InstanceSizeEstimator (venice API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InstanceSizeEstimator (venice API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.linkedin.venice.memory</a></div>
<h2 title="Class InstanceSizeEstimator" class="title">Class InstanceSizeEstimator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.linkedin.venice.memory.InstanceSizeEstimator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">InstanceSizeEstimator</span>
extends java.lang.Object</pre>
<div class="block">This utility class provides functions to measure the heap size of objects for a limited number of classes. Wherever
 possible, the logic makes use of knowledge of the Venice code so that shared or static instances are ignored (i.e.,
 assuming that their amortized cost is negligible). The code here should all be hot path friendly, and make no use of
 reflection (except in static constants).

 If more classes require heap size measurement, the preferred approach is NOT to add code into this class! Rather, the
 preferred approach is to implement <a href="Measurable.html" title="interface in com.linkedin.venice.memory"><code>Measurable</code></a> and write the logic in <a href="Measurable.html#getHeapSize()"><code>Measurable.getHeapSize()</code></a>. This
 utility class is for cases where we wish to measure classes that we cannot modify, such as those coming from the JDK,
 from third-party libraries, or from code-gen.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getByteArraySizeByLength(int)">getByteArraySizeByLength</a></span>&#8203;(int&nbsp;length)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getObjectSize(java.lang.Object)">getObjectSize</a></span>&#8203;(java.lang.Object&nbsp;o)</code></th>
<td class="colLast">
<div class="block">Works for <a href="Measurable.html" title="interface in com.linkedin.venice.memory"><code>Measurable</code></a> objects and a small number of other types.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(byte%5B%5D)">getSize</a></span>&#8203;(byte[]&nbsp;bytes)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(com.linkedin.venice.kafka.protocol.ControlMessage)">getSize</a></span>&#8203;(<a href="../kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;cm)</code></th>
<td class="colLast">
<div class="block">This function is imprecise in a couple of ways.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(com.linkedin.venice.kafka.protocol.Delete)">getSize</a></span>&#8203;(<a href="../kafka/protocol/Delete.html" title="class in com.linkedin.venice.kafka.protocol">Delete</a>&nbsp;delete)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope)">getSize</a></span>&#8203;(<a href="../kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol">KafkaMessageEnvelope</a>&nbsp;kme)</code></th>
<td class="colLast">
<div class="block">Measure the heap usage of <a href="../kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol"><code>KafkaMessageEnvelope</code></a>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(com.linkedin.venice.kafka.protocol.ProducerMetadata)">getSize</a></span>&#8203;(<a href="../kafka/protocol/ProducerMetadata.html" title="class in com.linkedin.venice.kafka.protocol">ProducerMetadata</a>&nbsp;producerMetadata)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(com.linkedin.venice.kafka.protocol.Put)">getSize</a></span>&#8203;(<a href="../kafka/protocol/Put.html" title="class in com.linkedin.venice.kafka.protocol">Put</a>&nbsp;put)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(com.linkedin.venice.kafka.protocol.Update)">getSize</a></span>&#8203;(<a href="../kafka/protocol/Update.html" title="class in com.linkedin.venice.kafka.protocol">Update</a>&nbsp;update)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSize(java.nio.ByteBuffer)">getSize</a></span>&#8203;(java.nio.ByteBuffer&nbsp;byteBuffer)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getObjectSize(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getObjectSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getObjectSize&#8203;(@Nonnull
                                java.lang.Object&nbsp;o)</pre>
<div class="block">Works for <a href="Measurable.html" title="interface in com.linkedin.venice.memory"><code>Measurable</code></a> objects and a small number of other types.

 Not intended as a generic utility for any instance type!</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - when an unsupported type is passed.</dd>
</dl>
</li>
</ul>
<a id="getByteArraySizeByLength(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getByteArraySizeByLength</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getByteArraySizeByLength&#8203;(int&nbsp;length)</pre>
</li>
</ul>
<a id="getSize(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(@Nonnull
                          byte[]&nbsp;bytes)</pre>
</li>
</ul>
<a id="getSize(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(java.nio.ByteBuffer&nbsp;byteBuffer)</pre>
</li>
</ul>
<a id="getSize(com.linkedin.venice.kafka.protocol.ProducerMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(@Nonnull
                          <a href="../kafka/protocol/ProducerMetadata.html" title="class in com.linkedin.venice.kafka.protocol">ProducerMetadata</a>&nbsp;producerMetadata)</pre>
</li>
</ul>
<a id="getSize(com.linkedin.venice.kafka.protocol.Put)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(@Nonnull
                          <a href="../kafka/protocol/Put.html" title="class in com.linkedin.venice.kafka.protocol">Put</a>&nbsp;put)</pre>
</li>
</ul>
<a id="getSize(com.linkedin.venice.kafka.protocol.Delete)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(@Nonnull
                          <a href="../kafka/protocol/Delete.html" title="class in com.linkedin.venice.kafka.protocol">Delete</a>&nbsp;delete)</pre>
</li>
</ul>
<a id="getSize(com.linkedin.venice.kafka.protocol.ControlMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(@Nonnull
                          <a href="../kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;cm)</pre>
<div class="block">This function is imprecise in a couple of ways. The <a href="../kafka/protocol/ControlMessage.html#controlMessageUnion"><code>ControlMessage.controlMessageUnion</code></a> field is treated as
 shallow, which in some cases is false (e.g. if a compression dictionary were present), and the
 <a href="../kafka/protocol/ControlMessage.html#debugInfo"><code>ControlMessage.debugInfo</code></a> is ignored (i.e. treated as null).

 We can be more precise by looking at the <a href="../kafka/protocol/ControlMessage.html#controlMessageType"><code>ControlMessage.controlMessageType</code></a> and then providing the precise
 overhead based on each type, but we're skipping this work for now since, in our use case, control messages should
 be a negligible fraction of all messages, and therefore not that important to get exactly right.</div>
</li>
</ul>
<a id="getSize(com.linkedin.venice.kafka.protocol.Update)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(@Nonnull
                          <a href="../kafka/protocol/Update.html" title="class in com.linkedin.venice.kafka.protocol">Update</a>&nbsp;update)</pre>
</li>
</ul>
<a id="getSize(com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSize</h4>
<pre class="methodSignature">public static&nbsp;int&nbsp;getSize&#8203;(<a href="../kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol">KafkaMessageEnvelope</a>&nbsp;kme)</pre>
<div class="block">Measure the heap usage of <a href="../kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol"><code>KafkaMessageEnvelope</code></a>.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
